<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="Author" content="Rod Elliott">
	<meta name="description" content="ESP Project Pages - Linkwitz-Riley Electronic Crossover. Suitable for bi-amping or triamping, subwoofers, hi-fi or pro-audio use.">
	<!-- ESP Project Pages - Linkwitz-Riley Electronic Crossover. Suitable for bi-amping or triamping, subwoofers, hi-fi or pro-audio use. -->
	<meta name="keywords" content="audio, project, diy, amp, preamp, crossover, linkwitz, riley, 24db, fourth order, 4th order, circuit, schematic, diagram">
	<title>Linkwitz-Riley Electronic Crossover</title>
	<link rel="StyleSheet" href="esp.css" type="text/css" media="screen, print">
	<link rel="shortcut icon" type="image/ico" href="favicon.ico">
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<table width="100%"><tr><td><img SRC="esp.jpg" alt="ESP Logo" height=81 width=215>
<td align="right" valign="bottom">

<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</td></table>

<table WIDTH="100%" BGCOLOR="blue">
<tr><td class="hdrl">&nbsp;Elliott Sound Products</td>
<td ALIGN=RIGHT class="hdrr">Project 09&nbsp;</td>
</tr></table>

<p align="center"><b>24 dB/Octave 2/3-Way Linkwitz-Riley Electronic Crossover</b><br />
<small>Rod Elliott - ESP, Last Updated 22 Aug 12</small></p>

<!-- AddThis Button BEGIN -->
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<div class="addthis_toolbox addthis_default_style">
<a href="http://addthis.com/bookmark.php?v=250&amp;username=rode" class="addthis_button_compact">Share</a>
<span class="addthis_separator">|</span>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_myspace"></a>
<a class="addthis_button_google"></a>
<a class="addthis_button_twitter"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=rode"></script>
<!-- AddThis Button END -->

<hr /><a href="pcb/pricelist.html" target="_blank"><img SRC="pcb.gif" alt="PCB" border=0 align="left"></a>
 &nbsp; PCBs (revision B) are available for this project. Click the image for details.<br />
 &nbsp; (See Also Project 81 for details of the 12dB/octave version).<br />

<hr /><b>Introduction</b>
<p>The Linkwitz-Riley filter featured here has (almost) perfect phase-coherency, with no peaks or dips at the crossover frequency. The design is adaptable to 2-way or 3-way (or even 4-way) operation, and all formulas are provided below (or use the ESP-LR component calculator program).</p>

<center><img src="p09b-pic.jpg" alt="Photo"><br /><small><b>Photo of Completed P09 Rev-B Circuit Board</b></small></center>

<p>Please note that the PCB version of the P09 crossover is a stereo 2-way design, and has balanced input buffers (unbalanced also available), high and low pass filters, level controls and output buffers for each channel. Each output buffer is configured for variable gain to allow your system to be set up correctly. The suggested power supply is the <a href="project05b.htm" target="_blank">P05 Rev-B</a>, which also has an auxiliary output suitable for operating muting relays (see below for reasons you may want to include muting).</p>

<hr /><b>2-Way Linkwitz Riley Crossover</b>

<p class="t-pic"><img SRC="p09_fig1a.gif" ALT="Figure 1A" BORDER="1" /><br />Figure 1A - Stereo Version of a 2-Way LR Crossover</p>

<p>Figure 1A shows the general concept for a full stereo version, with two identical filter sections (but without balanced inputs). With the component values shown, these have a crossover frequency of 310Hz (refer to the article on <a href="bi-amp.htm">Bi-Amping</a> to see the reason for my choice of frequency). This unit will provide a completely flat frequency response across the crossover frequency, with the signal from both filters remaining in phase at all times.</p> 

<p>Note that the PCB version is almost identical, but offers the choice of a balanced or unbalanced input stage. It's not switchable, but the mode is selected before construction, and links or resistors are installed as needed.

<p>The 2-Way unit is separated into 3 sections per channel ...</p>

<ul>
	<li><b>Input Buffer</b> - ensures that all filters are driven from a low impedance source, to prevent frequency and phase shifts (PCB includes ability for balanced input).</li>
	<li><b>High Pass</b> - as shown, frequency is approx. 310Hz. Use formulae below or ESP calculator program to determine values for other frequencies.</li>
	<li><b>Low Pass</b> - as shown, frequency is approx. 310Hz. As above for different frequencies.</li>
</ul>

<p>It is important with both versions that the filters are properly matched, both within the individual filters, and between channels. While small variations between channels will not be audible, if the high and low pass sections are not accurately matched, then phase and amplitude errors will result.</p>

<hr /><b>3-Way Linkwitz Riley Crossover</b>

<p class="t-pic"><img SRC="p09_fig1b.gif" ALT="Figure 1B" BORDER="1" /><br />Figure 1B - 3-Way Mono LR Crossover (2 Needed for Stereo)</p>

<p>Figure 1B shows the way to connect a 3-Way crossover. This unit produces excellent results, with good phase coherency and a flat response across the entire frequency band.</p>

<p>I know the circuits look complicated, but each is basically repetition of a common circuit block - the filter section. Since the opamps are all used as unity gain buffers, the use of premium devices is not really essential, so the TL072 type would be quite serviceable in this role. Needless to say, if you want to use better devices (even discrete opamps) you can easily do so. Make sure that any device used is stable for unity gain - this is not always the case with some devices, especially when external compensation is used. In this case, use the manufacturer's recommended value of stability cap for unity gain operation.</p>

<table BORDER="0" WIDTH="100%"><tr><td><img SRC="opamp.gif" ALT="Opamp Pinouts"></td>
<td>Power supply connections (and bypass capacitors) have not been shown, but the diagram shows the standard connections for a dual opamp. The IC is viewed from the top. The +/-15V power supply described (see <a href="project05b.htm" target="_blank">Project 05 - Power Supply For Preamps</a>) is suitable for this crossover as well, and will easily power your preamp and a 3-way version of the crossover. For dual opamps, power is connected to Pin 4 (-ve) and Pin 8 (+ve).</td></tr></table>

<p><b>NOTE: </b>Only one channel is shown for the 3-Way - for a stereo setup, two identical filter circuits are required.</p> 

<p>As can be seen, the 3-Way unit is separated into 4 sections ...</p>

<ul>
	<li><b>Input Buffer</b> - ensures that all filters are driven from a low impedance source, to prevent frequency and phase shifts</li>
	<li><b>High Pass</b> - as shown, frequency is approx. 3100Hz</li>
	<li><b>Band Pass</b> - as shown, frequencies used are high pass at 310Hz and low pass at 3100Hz</li>
	<li><b>Low Pass</b> - as shown, frequency is approx. 310Hz</li>
</ul>

<p>In 3-Way mode, the bandpass section must have a highpass section whose frequency is exactly equal to that of the main low pass (bass) filter, and a low pass section whose frequency is equal to the main highpass (treble) filter. (No, this isn't confusing, it just looks that way.) See the chart above for clarification if this doesn't seem to make sense.

<p>If it helps, I have included a block diagram that may make things clearer.  This is shown below, and has all the sections for a 3-way crossover network.  Again, this is mono, so two complete blocks are used for a stereo system.</p>

<p class="t-pic"><img src="p09_fig1c.gif" border="1" alt ="Figure 1C" /><br />Figure 1C - Block Diagram of 3-Way Crossover</p>

<p>Frequencies shown are for reference only, and are the same as described above. Naturally, these will need to be changed to suit your application. Note the dotted connection between the input buffer's output and the input to the low-pass filter. If you were to connect the filters like that (rather than as shown), phase shifts through the system will cause the summed output to be different from what you expect. The sections are connected together to give the best outcome - changes will cause unexpected variations, none of which is likely to be good. Opamps always add some phase shift (albeit small), which can make matters worse.</p>

<p>The frequency responses of each section are shown below, note that the crossover frequency is at the -6dB point, and not at the traditional -3dB frequency. This is an important difference between a Butterworth and Linkwitz-Riley filter, and allows the signals to be in phase across the audio band, regardless of which filter section they are being passed by. The electrically (and acoustically) summed output of this filter is flat, there are no peaks or dips, and no phase reversals are produced (unlike 12dB/octave filters).</p>

<p>A simple test with any electronic crossover is to connect a 10k resistor to each output, and join the other ends together. Run a frequency sweep from an audio oscillator into the input, and observe the output level at the output of the resistor summing network. Most traditional (typically Butterworth) crossover networks exhibit a 3dB increase at the xover frequency, and drop back to the reference level about an octave or so each side. This is a less than ideal situation, since in most cases a similar effect will occur from the speaker's summed acoustical output - assuming that the drivers are 'time aligned' so the output of each is in phase (acoustically speaking) at the crossover frequency. If time alignment is not done, and the physical distance difference between speaker voice coils is large (more than 0.1 wavelength of the frequency concerned), then other acoustical differences caused by phase will tend to overshadow any anomaly in the crossover network.</p>

<p class="t-pic"><img SRC="p09_fig2.gif" ALT="Figure 2" BORDER="1"><br />Figure 2 - Frequency Response of 3-Way Linkwitz-Riley Crossover Network</p>

<p>Frequency response is shown from 20Hz to 20kHz, although the bandwidth is much wider (less than 1Hz is easy, and 100kHz or more can be expected with fast opamps. Insertion loss is 0dB, since there is no gain or loss introduced by the filters in their pass-band. The crossover points are defined by the -6dB points of each filter, and are at 310Hz and 3.1kHz (as expected from the above schematics). The summed response is flat, other than a tiny (0.11dB) dip at just below 3kHz. This is caused by phase shift in the high-pass section of the low frequency crossover.

<p>The connections shown must be used as indicated. As noted above, phase anomalies will cause usually minor (but easily measured) response variations if the filters are not cascaded. If you use the ESP boards, the correct wiring is shown in the construction article.</p>

<hr /><b>Output Buffers (and .... )</b>
<p>When you use an electronic crossover, you need some way of equalising the levels from each output to match the power amp sensitivity and speaker efficiency. The circuit for a suitable buffer is shown in Figure 3. There is nothing special about it, but it is designed to give a gain of 2 to allow maximum flexibility, and ensures that the impedance of the pots does not cause any high frequency loss with long interconnects. The gain can be changed by varying the resistor values (Rf1 and Rf2). For unity gain, omit Rf2 and use a link for Rf1.</p>

<p class="t-pic"><img SRC="p09_fig3.gif" ALT="Figure 3" BORDER="1" /><br />Figure 3 - Buffer Stage. One Per Output Needed</p>

<p>These buffers should use high quality opamps, and they are included on the PCB, including the trimpot (see the photo at the beginning of this article).

<p>Several people (including me) have found that the crossover unit has a short 'chirp' or 'snap' (depending on the opamp characteristics) as power is removed, and this may be accompanied by some DC swing. If you use the new version of the P05B preamp power supply, the auxiliary output can be used to activate a 6-pole relay (or as many smaller relays as needed) to short all outputs to earth when there is no power. The normally closed contacts simply short the outputs to ground, and when power is applied the short is removed. P05 (Rev-B) boards have a power-on delay and a loss of AC detector that will mute the crossover for a few seconds at power-on, and almost immediately when power is turned off.</p>

<p>Because all common opamps have short circuit protection, this will not cause any damage, and current is limited further by the 100 ohm output resistors.</p>

<hr /><b>Variable Frequency Crossover</b>
<p>As you can see from the main circuit diagram, a 4th order Linkwitz-Riley would be difficult to make into a variable network, due to the large number of resistors which need to change. Use of multi-ganged potentiometers is discouraged, because of the matching requirements. Sufficiently accurate 8-gang pots are unlikely to be readily available!</p>

<hr /><b>Tuning Formula</b>
If you absolutely insist on performing the calculations yourself, the formulae are ...

<blockquote>
	(1) &nbsp; R = 1 / (2 * &pi; * 1.414 * f * C)<br />
	(2) &nbsp; C = 1 / (2 * &pi; * 1.414 * f * R)<br />
	(3) &nbsp; f = 1 / (2 * &pi; * 1.414 * R * C)
</blockquote>

<small>Where R = resistance in Ohms, &pi; = 3.14159, 1.414 is &radic;2, f = frequency in Hertz and C = capacitance in Farads</small>

<p>(1) &nbsp; This assumes that you have selected the capacitance first, which is the most sensible, since they are available in fewer different values in each decade than resistors. Capacitors follow the "E12" series, which has 12 values per decade, so:

<blockquote>1.0, 1.2,  1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2, 10</blockquote>

These are multiplied by 10, 100 (etc), to obtain all the values from 1nF - 10nF, 10nF - 100nF, and 100nF - 1uF. Values above 1uF and below 100pF are generally not as readily available in all values, and should be avoided for this design, since very large or very small values will create impedances which are too difficult to handle. Very low values of capacitance mean that even small amounts of stray capacitance on PCB tracks or in wiring will create errors. Large values of capacitance will imply low impedances, which opamps may not be able to drive without excessive distortion or clipping.

<p>(2) &nbsp; Is the least useful, since the range of capacitor values is only half that of 1% resistors. Really strange values can be assured, which will require parallel combinations of smaller caps - messy.</p>

<p>(3) &nbsp; Is useful to check that the components selected will give you the frequency that you first thought of, or something reasonably close after standard component values have been substituted for the theoretical values you will get with the calculation.</p>

<p>The calculator program is far easier and more fun, too. (Of course I like it - I wrote it!)</p>

<p><b>Capacitor values</b> need to be accurate - the standard offering is +/-10%, which is not really good enough. If you have (or can get access to) a capacitance meter, simply buy more than you need (they are inexpensive), and select the values to be within 2% or better if possible. My experience is that the tolerance of most MKT and MKP caps is actually better than that quoted, but you do need to check!</p>

<p>The easiest way to get the "2C" value is to use two capacitors in parallel, each of value "C".</p>

<p><b>Resistor values</b> also need to be accurate, and 1% metal film resistors are perfectly acceptable. These are generally available in the E24 series (24 values per decade), allowing a much wider choice of values. Both the E12 and E24 series values are available in the Component Calculator (Help-Preferred Values) for reference. In some shops (oh, really?) you might even be able to get resistors in the E48 or E96 range - these offer an almost limitless range of possibilities (48 or 96 values per decade - awesome!), just don't count on it.</p>

<hr /><b>General Notes ...</b>
<ul>
	<li>Although not specifically mentioned above, P09 is ideal for subwoofer applications. While the frequency is not adjustable, this is 
	not a major limitation when a full crossover network is used. Most subwoofer 'plate' amplifiers use a variable filter simply because 
	there is only one filter! It is therefore necessary to tweak the crossover frequency and phase to get a smooth integration with the 
	main system. While some plate amps <i>do</i> use two filters, only one is adjustable - usually that feeding the sub itself.

	<br /><br />P09 will give a far better result in almost all cases, because the main system can be rolled off quickly below the selected 
	frequency. This can give a major improvement of intermodulation distortion performance by removing all frequencies that may stress 
	the main speakers. This is especially important when the main speakers are 2-way (including MTM designs).<br /><br /></li>
	
	<li>As noted above, some opamps create a transient signal upon application or removal of power. Because this will create a loud sound, 
	many builders may want to incorporate a delayed action switch, to ensure that the outputs of the circuit are not connected to the load 
	until the operating conditions have stabilised. One simple solution is described above, and will work perfectly. Alternatively, the 
	<a href="project05b.htm" target="_blank">P05 Rev-B</a> power supply has an auxiliary output that is designed to be used for muting.<br /><br />
	
	Although the transients are unlikely to cause damage to any amplifier or loudspeaker, but do not sound very nice. For a system that you 
	build yourself, there is a great satisfaction in having it perform flawlessly, so it is probably worth the small effort to use the P05-B
	supply's aux output to drive muting relays.<br /><br /></li>
	
	<li>The crossover as described is phase coherent, in that the phase of each signal applied to each loudspeaker driver is essentially in 
	phase with all other signals that have passed through the crossover. Because filters are used, the crossover is <b><i>not</i></b> phase 
	neutral - there are wide variations in absolute phase as the frequency changes. This is the case with all crossover networks, from the 
	simplest to the most complex, active or passive.<br /><br />
	
	I mention this because of possible interactions between the main (Left and Right) speakers, and the centre and rear speakers in a surround 
	sound environment. The possibility exists that in some circumstances, the phase interactions between this crossover and other crossovers 
	in a home theatre system may be incompatible with some material. These interactions will always (<b><i>always!</i></b>) be present unless 
	all speakers in the system have identical crossover networks - not just the same crossover frequencies, but identical networks, drivers and
	cabinet layouts.  This is rarely (if ever) the case in reality.<br /><br /></li>
	
	<li>If you examine the output waveform, be aware that if your audio generator has more than 0.1% distortion, the high pass output will 
	appear very distorted when you select a frequency more than one octave below the crossover frequency. This is <i>not</i> a fault of the
	crossover. Because the fundamental is attenuated the most, the harmonics are effectively increased by 24dB (for the second harmonic) and 
	about 36dB for the third. This makes the output waveform look very distorted, yet your input signal will appear to be clean on an 
	oscilloscope. It is difficult to see any distortion below 1% on an oscilloscope, but this amount of distortion will make the output look 
	very nasty indeed. Do not despair - all is well.</li>
</ul>

<hr /><b>Phase Shift</b>
<p>I have heard a report (apparently voiced elsewhere) that there is supposedly a problem with phase shift. The short answer is "nonsense", but a slightly better explanation is needed. There may indeed be a small phase difference between the high and low pass sections, and if so it's because of component tolerance (especially capacitors). for example, if two of the caps in the high pass section are 1% high (10nF and 10.1nF caps used), you'll get less than 1&deg; phase shift between the high and low pass sections. This will cause a peak of 0.036dB - hardly worth getting excited about.</p>

<p class="t-pic"><img SRC="p09-f4.jpg" ALT="Figure 4" BORDER="1" /><br />Figure 4 - Measured Phase Shift Of Prototype P09 Board</p>

<p>The above shows the measured response of one channel of my prototype P09 board (the one in the photo at the beginning of this page). The cursors indicate that there is a 10us difference between the two signals (yellow is low pass, blue is high pass). At 3kHz, 1 degree corresponds to a time delay of 926ns, so 10us is a little over 10&deg;. Even a 10% difference of two of the caps only increases the phase shift to ~7&deg;, and causes a 0.36dB peak or dip.

<p>To minimise phase shift, simply match the capacitors as accurately as possible. If you choose not to bother, it is highly unlikely that you will hear any difference whatsoever. The prototype was built with no attempt to match the caps, other than to ensure they were from the same batch (they were taped together because I buy in bulk). The shift in the crossover frequency is negligible.</p>

<hr /><b>ESP Linkwitz-Riley Component Calculator</b>
<p>The completed Linkwitz-Riley component calculator is available for you to <a href="#download_esp_lr">download</a>. It includes the circuit diagrams for both the high-pass and low-pass sections, and has the following features:</p>

<ul>
	<li>Calculate resistance from a known frequency and capacitance</li>
	<li>Calculate capacitance from a known frequency and resistance</li>
	<li>Calculate frequency from the resistance and capacitance values (good for checking after standard value components have been selected)</li>
	<li>Includes a chart for the E12 and E24 series. Capacitors generally follow the E12 series, and 1% metal film resistors are always 
	available in the E24 series.</li>
	<li>Calculate the values as a low-pass, then select high-pass. The new values are displayed, along with the circuit.</li>
	<li>Calculates both 12dB/octave and 24dB/octave filters.</li>
</ul>

<p>This program (<small>ESP-LR13.EXE</small>) is the actual executable file. This is version 1.3 of the program, and is 88kB, so it is not overly large. There are no setup programs or such like, so you simply have to decide where to put it, and create your own shortcut. Feel free to distribute the program to friends, since I have released it as freeware - just don't change the program in any way is all I ask.

<p>The program requires the <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=bf9a24f9-b5c5-48f4-8edd-cdf2d29a79d5&amp;displaylang=en" target="_blank">Microsoft VB6 run-time library</a>, which can be obtained from Microsoft's web site if it is not installed on your machine. Note that the program is 32-bit, so it won't run on pre Win98 operating systems. The following is a guide as to where the DLL should be installed ...</p>

<table width="50%">
<tr><td width="5%"></td><td><b>Operating System  &nbsp;  &nbsp; </b></td><td><b>VB6 Support File Location</b></td></tr>
<tr><td></td><td>Windows95</td><td>Not supported</td></tr>
<tr><td></td><td>Windows98</td><td>c:\windows\system</td></tr>
<tr><td></td><td>WindowsNT</td><td>c:\winnt\system32</td></tr>
<tr><td></td><td>XP</td><td>c:\windows\system32</td></tr>
<tr><td></td><td>Vista</td><td>Should be pre-installed</td></tr>
<tr><td></td><td>Windows7</td><td>See below</td></tr>
</table>

<p>In all cases, the above assumes that the C: drive is the installation drive. This will usually be the case, but some installations may differ. For Windows7 users, Microsoft suggests elsewhere that the VB6 run-time library will work, but it's not supported for 64 bit versions. I've tested it though, and found no issues (programs work normally).</p>

<p><small>Note that although all care has been taken to ensure the file is virus free, ESP cannot absolutely guarantee that this is the case - I don't appear to have any viruses on my machine, but one cannot be too careful. As with all executable downloads, use your own virus scanner to check it before execution.</small></p>

<p align="center"><a id="download_esp_lr"></a><a href="software/esp-lr13.exe">Download Now (88kB)</a></p>

<hr />
<center>&nbsp;
<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<hr /><a href="projects.htm" OnMouseOver="document.b1.src='arrow.gif';" OnMouseOut="document.b1.src='a1.gif';">
<img src="a1.gif" name="b1" alt="Index" border=0 height=24 width=40></a><b>Projects Index</b>
<br /><a href="index2.html" OnMouseOver="document.b3.src='a.gif';" OnMouseOut="document.b3.src='a1.gif';">
<img src="a1.gif" name="b3" alt="ESP Home" border=0></a><b>Main Index</b><br /><br />

<table BORDER BGCOLOR="black">
<tr><td class="t-wht"><a id="copyright"></a><b>Copyright Notice.</b> This article, including but not limited to all text and diagrams, is the intellectual property of Rod Elliott, and is Copyright &copy; 1999. Reproduction or re-publication by any means whatsoever, whether electronic, mechanical or electro-mechanical, is strictly prohibited under International Copyright laws. The author (Rod Elliott) grants the reader the right to use this information for personal use only, and further allows that one (1) copy may be made for reference while constructing the project. Commercial use is prohibited without express written authorisation from Rod Elliott.</td></tr></table>

<div class="t-sml">Updated ... 26 Oct 1999 - Modified circuit to reduce high frequency phase errors./ 20 Nov 1999 - added resistors to filter outputs on all drawings./ 13 Aug 01 - update, and linked new calculator./ 06 Sep 05 - Added block diagram, info reformat./ 15 Sep 06 - minor corrections and additions./ 25 Mar 00 - Added Buffer Amp./ 30 May 07 - Changed to suit Rev-B boards./ 22 Aug 12 - minor update.</div>
</body>
</html>
