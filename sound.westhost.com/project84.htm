<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<meta name="Author" content="Rod Elliott - Elliott Sound Products">
	<meta name="keywords" content="subwoofer, sub-woofer, equaliser, equalizer, graphic, 1/3 octave, constant q, audio, project, diy, circuit, schematic, diagram">
	<meta name="description" content="ESP Project Pages - This equaliser is an 8 band constant Q design, and is designed specifically for sub-woofer EQ">
	<title>Eight Band Sub-Woofer Equaliser</title>
<!-- ESP Project Pages - This equaliser is an 8 band constant Q design, and is designed specifically for sub-woofer EQ -->
	<link rel="StyleSheet" href="esp.css" type="text/css" media="screen, print">
	<style TYPE="text/css"><!-- td { font-size: 10pt } --> </style>
	<link rel="shortcut icon" type="image/ico" href="favicon.ico">
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<table width="100%"><tr><td><img SRC="esp.jpg" alt="ESP Logo" height=81 width=215>
<td align="right">

<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</td></table>

<table WIDTH="100%" BGCOLOR="blue"><tr><td class="hdrl">&nbsp;Elliott Sound Products</td>
<td ALIGN=RIGHT class="hdrr">Project 84&nbsp;</td></tr></table>

<p align="center"><b>Eight Band Sub-Woofer Graphic Equaliser</b><br />
<small>Rod Elliott (ESP) [<a href="#reference">1</a>], Updated 19 Jul 2009</small></p>

<!-- AddThis Button BEGIN -->
<script type="text/javascript">
var addthis_config = {
    data_track_clickback: true
}
</script>

<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<div class="addthis_toolbox addthis_default_style">
<a href="http://addthis.com/bookmark.php?v=250&amp;username=rode" class="addthis_button_compact">Share</a>
<span class="addthis_separator">|</span>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_myspace"></a>
<a class="addthis_button_google"></a>
<a class="addthis_button_twitter"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=rode"></script>
<!-- AddThis Button END -->

<hr><a href="pcb/pricelist.html" target="_blank"><img SRC="pcb.gif" alt="PCB" border=0 align="left"></a>
 &nbsp; <b>Please Note:</b>&nbsp; PCBs are available for this project. Click the image for details.<br>


<hr><b>Introduction</b>
<p>Your sub is installed and set up as best you can, but you can't quite get it to sound right.  Some frequencies are too prominent, while others seem subdued.  If this sounds familiar, then this equaliser is what you need to fix it.  It is not a panacea, and will not cure an impossible room, but the majority of lumps and bumps in the subwoofer response will respond very well to an equaliser as described here.
<p>The unit is an 8 band variation on the expandable equaliser described in the Project Pages, and is dedicated to its task.  Boards can be stacked to get more bands if desired, but the arrangement shown will be quite sufficient for most installations.</p>

<p align="center"><img src="p84-pic.jpg" border=1><br><small><b>Photo of Completed P84 Board</b></small></p>

<p>The equaliser is a <a href="#reference">constant Q design</a>, so unlike most "ordinary" equalisers, it does not have a very low Q at low settings of boost and cut.  This is a major problem with the standard (graphic) equaliser circuit, and is completely avoided by the constant Q version. Using the Multiple Feedback Bandpass design, these filters can be designed for any (reasonable) frequency and Q desired.  As a 1/3 Octave equaliser, the filter Q should be 4.3, but I have deliberately lowered this to 4 for this design to allow a little overlap. 
<p>While there will always be "that" room which defies all attempts to make anything sound halfway decent, this EQ will dispose of the majority of problems likely to be encountered. 

<hr><b>Description</b>
<p>The equaliser is 1/3 Octave band, with centre frequencies at 25, 32, 40, 50, 63, 80, 100 and 125 Hz. It can also be used with a starting frequency of 20Hz if desired (see table below). The circuit itself uses an opamp as an input buffer (U1A), ensuring a low impedance drive to the following inverting buffer.  All filters are driven by an inverted signal from U2B, and the maximum amount of boost or cut is determined by the value of R8. 
<p>U1B is a summing amp, and it takes its input from the combination of the input, and the output signal from the CUT bus - this comes from the pots used as the level control for each frequency band.  The combined signal is summed again by U2A, this time with the signal from the BOOST bus added.  The signal drive to all filters is performed by U2B, the gain of which determines the maximum boost and cut allowed.  As shown, The circuit will provide about +/-14dB, and the response is completely flat with all pots centred.  Reduce the range by reducing the value of R8 (39k) - a value of 10k gives 6dB of boost and cut.
<p>The actual operation of the circuit relies primarily on the amplitude and phase of the selected frequency, and it is beyond the scope of this article to cover it in great detail.  The inverted signal drive is compensation for the fact that a standard multiple feedback filter is inverting at the resonant frequency - I shall leave it to the reader to work out exactly what happens (assuming you care, of course). For full details of the circuit topology, see the <a href="#reference">reference</a> below.

<center><img SRC="p84-f1.gif" ALT="Figure 1" BORDER=1>
<br><b><font size=-1>Figure 1 - Input and Output Circuitry</font></b></center>

<p>Although not shown here, there is a bypass cap for each dual opamp.  These should be 100nF multilayer ceramic types for best performance.  This is critical if high speed opamps are used, but still important if using the recommended TL072 opamps.  There is little or nothing to be gained in using "audiophile" grade opamps for a subwoofer, since the TL072 has more than sufficient bandwidth for the job.  Naturally if it makes you feel better, then OPA2134s or similar work beautifully.</p>

<table WIDTH="100%"><tr><td><img SRC="opamp.gif"></td>
<td><font size="+0">The figure on the left (top view) shows the standard pinouts used for the vast majority or basically <i>all</i> dual opamps. If the PCB is used for this project (highly recommended, by the way), then only opamps with this pin configuration may be used.  This is not a limitation :-)&nbsp; Correct insertion is (as always) essential, or the opamps will die <b><i>!</i></b></font></td></tr></table>

<p>The filters are repeated - two (the first and last) are shown in Figure 2, and a multiple feedback (MFB) filter block is used 8 times to get the eight bands.</p>

<center><img SRC="p84-f2.gif" ALT="Figure 2" BORDER=1>
<br><b><font size=-1>Figure 2 - Multiple Feedback Bandpass Filters</font></b></center>

<p>The table below shows the designations for all the filter sections.  The output caps (10uF 63V as shown) may also be bipolar electrolytics - film caps would be nice, but are simply too large to fit on a decent sized board.  The difference in performance is unlikely to be audible with any system, since the caps are very much bigger than they need to be at even the lowest frequency.  The -3dB frequency for all output networks in this section is 1.6Hz worst case - well below anything we can hear.</p>

<p>The frequency selection components are shown in the following table - these are quite accurate, and will generally be suitable for all applications.  I have included the 20Hz band for those who may want to move the range down slightly - only eight of the frequencies are used for the unit. The nomenclature for the various MFB filter components has been changed to match the markings on the PCB - this makes component placement a lot easier. In general, the range from 25Hz to 125Hz will be more than sufficient for all but the most potent subs.</p>

<center><table BORDER WIDTH="700" style="border-collapse: collapse">
<colgroup span=5 width="20%">
<tr><td><b>Freq Band</b></td><td><b>Ri</b></td><td><b>Re</b></td><td><b>Rf</b></td><td><b>Ci,&nbsp; Cf</b></td></tr>
<tr><td>20</td><td>330k</td><td>10k</td><td>680k</td><td>100nF</td></tr>
<tr><td>25</td><td>270k</td><td>8k2</td><td>510k</td><td>100nF</td></tr>
<tr><td>31</td><td>270k</td><td>8k2</td><td>510k</td><td>82nF</td></tr>
<tr><td>40</td><td>330k</td><td>10k</td><td>680k</td><td>47nF</td></tr>
<tr><td>50</td><td>330k</td><td>10k</td><td>680k</td><td>39nF</td></tr>
<tr><td>63</td><td>270k</td><td>8k2</td><td>510k</td><td>39nF</td></tr>
<tr><td>80</td><td>82k</td><td>2k7</td><td>160k</td><td>100nF</td></tr>
<tr><td>100</td><td>82k</td><td>2k7</td><td>160k</td><td>82nF</td></tr>
<tr><td>125</td><td>150k</td><td>4k7</td><td>330k</td><td>33nF</td></tr>
</table></center>

<p>Arrrgh!&nbsp; The values are all over the place - this was done to avoid having to use caps in parallel (there is no room on the board), and I have tried to maintain at least passably sensible values.  Unfortunately, maintaining the Q and frequency for such closely spaced filters is not easy, and the table above is the result.  Feel free to use the MFB Filter calculator program to see if you can do any better - it is available from the <a href="download.htm" target="_blank">Download</a> page.

<center><img SRC="p84-f3.gif" ALT="Figure 3" BORDER=1>
<br><b><font size=-1>Figure 3 - Optional On-Board Power Supply</font></b></center>

<p>Finally, the DC power supply section. This allows the P84 board to be run as a stand-alone unit, requiring only an AC power input. While the <a href="project05.htm" target="_blank">P05 Power Supply</a> is recommended for this unit, although in many cases it will be easier to use the on-board supply. Because of size constraints, the main filter caps are the smallest value that will work, so the supply is only capable of relatively low current (I suggest about 30mA maximum). This is sufficient to run the equaliser, as well as a P48 or P71 circuit for speaker correction. The AC section is completely optional - it can be omitted (delete the two diodes, C2, C3, C6-C9, U7 and U8). &plusmn;15V is then connected to the DC input from an external supply. Depending on your supplier, it may be possible to fit larger caps than shown - I used 2,200uF 25V electros on the prototype, and they just fit (12.7mm diameter).
<p>There is one bypass cap for each opamp. While most commonly used devices don't need this level of bypassing, it doesn't hurt and allows "better" opamps to be used if it makes you feel better. In most cases, the suggested TL072 opamps are more than good enough for the application and any upgrade is unlikely to be audible.

<p><b><small>Note</small></b><br>The PCB for this project is designed to use miniature (9mm square, with or without PCB mounting frame) rotary pots, so the term "graphic" equaliser is something of a misnomer.  If desired, slide pots may be used, but will have to be wired to the board.  This is not as arduous as may first be thought, since there are only 10 wires needed.</p>

<hr><b>Measurements &amp; Observations</b>
<p>The prototype unit pictured above was measured, using 15V AC input and no housing (or shielding) of any kind. Noise was measured at less than 1mV unweighted (3Hz-300kHz bandwidth). The DC offset of the prototype was 8mV at the output, so you need a coupling cap for the subwoofer amp.
<p>With a 15V AC supply, total current draw was 92mA. This will be higher if you use opamps that draw more quiescent current, but even worst case will be less than 250mA. Unregulated ripple voltage was 65mV RMS with the 2,200uF filter caps installed. If you use smaller caps, it will be higher. Note that ripple is 50Hz (or 60Hz), and not 100/120Hz as you might expect. This is because the power supply is a simple voltage doubler for maximum flexibility.
<p>The absolute maximum input or output voltage is just under 10V RMS. With maximum boost, there is a gain of 14dB (5 times), so a 1V signal becomes 5V (which will clip any known power amplifier). In general, it is advisable to use a level control between the P84 output and the amplifier input so that the system becomes more controllable. The input level must be kept below 2V RMS at all times if maximum boost is being applied at any frequency.
<p>Maximum boost (or cut) is unlikely for most installations, and should be avoided if at all possible. The need for such aggressive equalisation indicates that there are other problems that should be addressed. It may be necessary to change the location of the sub, use a pair of subs in different places in the room, or apply room treatment.</p>

<hr><b>Using The Equaliser</b>
<p>Connect the equaliser into the signal path (usually between the source and the subwoofer equalisation and/or power amplifier).  Make sure that all pots are centred for an initial flat response.  Verify that the sub sounds the same as before, then preferably with a test CD (known music will work too, but is not as predictable), run a frequency sweep (or burst signals) and adjust the equaliser for the smoothest response in the low frequencies.  You should be in your normal listening position for this - the sound quality will be different in different parts of the room, and this is part of the problem in the first place.
<p>Make adjustments sparingly - over use of an equaliser is a guaranteed way to ruin the sound, so make adjustments in small increments, one band at a time.  It may take a while before you are completely happy, but careful listening and perseverance are the key to getting ot right. Generally, you are more likely to need a reasonable amount of cut than boost, and although possible, it is not really practical to make the circuit asymmetrical.
<p>Once set, the EQ settings will not need to be changed, so the unit should be placed where it is not readily accessible - you <b><i>know</i></b> what will happen if others know that it's there, and what it does.
<p>The settings will need to be changed if the subwoofer is moved, or if furniture is moved, added or removed from the listening area.  Large soft furnishings will make the biggest difference, while small (open) shelves will usually make little or no change at all.  Book cases are highly unpredictable animals, and only careful evaluation will determine if the settings remain accurate if a bookcase is added or removed.

<hr><a NAME="reference"></a><b>Reference</b>
<p>The design presented here is based on a paper (Constant Q Graphic Equalisers), written by Dennis A. Bohn of Rane Corporation.  The original work can be downloaded from the Rane site ... <a href="http://rane.com/pdf/constanq.pdf">http://rane.com/pdf/constanq.pdf</a>

<hr />
<center>&nbsp;
<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<hr /><a href="projects.htm" OnMouseOver="document.b1.src='arrow.gif';" OnMouseOut="document.b1.src='a1.gif';">
<img src="a1.gif" name="b1" alt="Index" border=0 height=24 width=40></a><b>Projects Index</b>
<br><a href="index2.html" OnMouseOver="document.b3.src='a.gif';" OnMouseOut="document.b3.src='a1.gif';">
<img src="a1.gif" name="b3" alt="ESP Home" border=0></a><b>Main Index</b><br /><br />

<table BORDER BGCOLOR="black">
<tr><td class="t-wht"><a id="copyright"></a><b>Copyright Notice.</b> This article, including but not limited to all text and diagrams, is the intellectual property of Rod Elliott, and is Copyright &copy; 2001. Reproduction or re-publication by any means whatsoever, whether electronic, mechanical or electro- mechanical, is strictly prohibited under International Copyright laws. The author (Rod Elliott) grants the reader the right to use this information for personal use only, and further allows that one (1) copy may be made for reference while constructing the project. Commercial use is prohibited without express written authorisation from Rod Elliott.</td></tr>
</table>
<div class="t-sml">Page Created and Copyright &copy; Rod Elliott 03 Jan 2002./&nbsp; Updated 02 Feb 02 - added some extra info, and PCB details./ 19 Jul 09 - updated project to show new PCB and provide less confusing filter table.</div>
</body>
</html>
