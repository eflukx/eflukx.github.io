<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.01 transitional//en">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<meta name="Author" content="Rod Elliott - Elliott Sound Products">
	<meta name="keywords" content="intermodulation, imd, intermod, distortion, class-a, class-b, class-ab, amplifier, triode, analogue, measurement, circuit, schematic">
	<meta name="description" content="ESP Audio Pages - Intermodulation distortion - things you didn't know.">
	<!-- ESP Audio Pages - Intermodulation distortion - things you didn't know. -->
	<title>IMD - Something New</title>
	<link rel="StyleSheet" href="esp.css" type="text/css" media="screen, print">
	<style TYPE="text/css"><!-- td { font-size: 10pt } th { font-size: 10pt } --> </style>
	<link rel="shortcut icon" type="image/ico" href="favicon.ico">
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<table width="100%"><tr><td><img SRC="esp.jpg" alt="ESP Logo" height=81 width=215>
<td align="right">

<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</td></table>

<table WIDTH="100%" BGCOLOR="blue"><tr><td class="hdrl">&nbsp;Elliott Sound Products</td>
<td ALIGN=RIGHT class="hdrr">Intermodulation Distortion&nbsp;</td></tr></table>

<p align="center"><b>Intermodulation - Something New To Ponder</b><br />
<small>Rod Elliott, 20 September 2012</small></p>

<!-- AddThis Button BEGIN -->
<script type="text/javascript">
var addthis_config = {
    data_track_clickback: true
}
</script>

<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<div class="addthis_toolbox addthis_default_style">
<a href="http://addthis.com/bookmark.php?v=250&amp;username=rode" class="addthis_button_compact">Share</a>
<span class="addthis_separator">|</span>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_myspace"></a>
<a class="addthis_button_google"></a>
<a class="addthis_button_twitter"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=rode"></script>
<!-- AddThis Button END -->

<hr /><a href="../articles.htm" OnMouseOver="document.t1.src='a.gif';" OnMouseOut="document.t1.src='a1.gif';">
<img src="a1.gif" name="t1" alt="Index" border=0 height=24 width=40 /></a><b>Articles Index</b>
<br /><a href="../index2.html" OnMouseOver="document.t3.src='a.gif';" OnMouseOut="document.t3.src='a1.gif';">
<img src="a1.gif" name="t3" alt="ESP Home" border=0 /></a><b>Main Index</b><br />

<hr /><b>Introduction</b> 
<p>The most interesting thing about intermodulation distortion (IMD) is how it behaves differently depending on whether the waveform and distortion is symmetrical or asymmetrical. Don't bother trying to verify this elsewhere - I searched many different sources and found no reference to this most interesting behaviour.  

<p><i>With a symmetrical input waveform, symmetrical distortion does not create the sum and difference frequencies</i>. At least, it doesn't generate a significant level at either the sum or difference frequency, and as noted below, each can be 75dB below the level that's created by an equivalent amount of asymmetrical distortion. For reasons that are very unclear to me, I can find no reference to this phenomenon in any text that I've seen so far. Every discussion you see will talk about distortion, intermodulation, and sum and difference frequencies, and it is implied (though never stated) that the distortion mechanism and waveform is inconsequential. It's not, and in fact makes a big difference to the behaviour.

<p>So, to get both the sum and difference frequencies, the non-linear part of the circuit must be asymmetrical. If you actually want the sum or difference frequency, you will be very disappointed if you use nice, low distortion input signals and a pair of back-to-back parallel diodes (as shown in Figure 1), because you'll get neither! The sum and difference frequencies are present, but at such a low level that they are inaudible and in real terms, probably immeasurable because they will be buried in noise. If you remove one of the diodes, the sum and difference frequencies reveal themselves immediately.

<p>It is important to understand that just because the sum and difference frequencies are not created by symmetrical distortion, this does not mean that there is no intermodulation. Because of the non-linearity in the circuit, if we examine only the fundamental frequencies (1kHz and 1.1kHz), we see these new frequencies generated (all in Hertz) ...

<p align="center"><b>600 &nbsp; 700 &nbsp; 800 &nbsp; 900 &nbsp; 1,300 &nbsp; 1,400 &nbsp; 1,500</b></p>

<p>Refer to Figure 4 to see these frequencies for yourself. In the list above, I only included frequencies that are greater than 100uV (-74dB with respect to the two fundamental frequencies). Anything below that level will be swamped by noise in any real test - either when listening or with an oscilloscope/ spectrum analyser.

<p>I don't expect anyone to believe this, because no-one else appears to have mentioned it. Electronics as we know it has been mainstream for almost 100 years, yet in all that time this phenomenon has gone either un-noticed or deemed to be of no consequence. I consider that it is of great consequence (well, at least <i>some</i> consequence <img src="grin.gif" /> ) - hence this article. So, assuming that you <i>don't</i> believe me, I suggest that you build the circuit shown in Figure 1, and feed a couple of clean sinewaves into it. You can monitor the output with an oscilloscope fitted with <abbr title="Fast Fourier Transform">FFT</abbr> capability, but it is essential that you also connect an amplifier and speaker so that you can hear it for yourself. You won't be able to hear the sum frequency because it gets swallowed up by harmonics, but the difference is definitely audible when the difference frequency is added.

<p>There is any number of free spectrum analysis tools available on the Net that can be used with your computer and sound card. While the 20kHz upper frequency limit would normally be a problem, it's more than enough for these tests. Such tools are great for just looking at things that you may not have seen before, and are highly recommended for interesting experiments, speaker tests and anything else that requires spectrum analysis in the audio band.

<p>There are two files that you can download - one is a two-tone signal that you can use for testing, and the other is a demonstration of the intermodulation distortion that you can listen to. While this may be convenient to get a basic idea, there is nothing like actually experimenting with the very simple circuit to convince yourself that the phenomenon described is real.</p>

<blockquote>
	There are two files you can use to test this phenomenon. Both are MP3 format ...<br /><br />
	<a href="sounds/intermod.mp3">intermod.mp3</a> 7 seconds, 122KB. This is the end result. First 3.5s, symmetrical, second 3.5s, asymmetrical<br />
	<a href="sounds/intermod-1k0+1k2.mp3">intermod-1k0+1k2.mp3</a> 20 seconds, 315KB. Use this to do your own tests.
</blockquote>

<p>If you use Audacity to look at the spectrum of "intermod.mp3", you'll see that there actually <i>is</i> some of the difference frequency in the file (you can hear it too). This isn't due to an error on my part, but the little voice recorder that I used has a non-linear front-end and that added the extras. Depending on the interest in this article, I'll re-record it through something that's a bit more linear.</p> 

<hr /><b>Description</b>
<p>With two signals, one at 1kHz and the other at 1.1kHz, apply around 1V RMS from each of the signal generators - keep the two signal generators at roughly the same level. Advance the pot until you have enough level to obtain 'just visible' (or just audible) distortion. With the circuit shown the pot needs to be set for about half level. With the second diode connected, you don't hear any 100Hz tone, but as soon as you <i>disconnect</i> it, the 100Hz tone is clearly audible, and it will show up in the signal spectrum. You might want to use 1.0kHz and 1.2kHz (as used in the above sound files), as the 200Hz tone is more audible than 100Hz with small speakers. 

<p>If you have a simulator program on your PC, you can also run a simulation. You'll see exactly the same thing if you set up the circuit as shown in Figure 1. 

<p class="t-pic"><img src="intermod-f1.gif" border="1" /><br />Figure 1 - Intermodulation Distortion Test Circuit</p>

<p>This test actually came about while I was testing something completely different. Many people wax lyrical about the "nice" distortion created by certain amplifiers, not realising that asymmetrical distortion creates not only the allegedly nice even harmonics, but also creates plenty of (allegedly nasty) odd harmonics as well. The total intermodulation products are actually greater with only one diode than with both (D1 and D2, Figure 1). I freely admit that no amplifiers normally show the type of distortion I used, but I was testing a theory, not looking for absolute specifics.

<p class="t-pic"><img src="intermod-f2.gif" border="1" /><br />Figure 2 - Intermodulation Distortion Waveforms</p>

<p>The green trace shows the asymmetrical distortion, while the red trace is symmetrical. The input voltage is the same for both, but the peak amplitude is slightly lower with symmetrical distortion because both positive and negative peaks are (soft) clipped equally. The soft clipping behaviour is clearly visible on the negative peaks of the red trace. 

<p>Soft clipping notwithstanding, this is a rather brutal demonstration, because it challenges so much of what has become "common wisdom". It is especially challenging when you run the tests for yourself. Even if you don't have an oscilloscope (let alone a digital model with FFT), the effects are immediately audible. If you don't have a signal generator, you can use your computer sound card, and generate the tones in software (using Audacity for example), or you can cheat and just download the file I already created (with Audacity ... <a href="sounds/intermod-1k0+1k2.mp3">intermod-1k0+1k2.mp3</a> 20 seconds, 315KB). You will need fairly heavy distortion to make the effect audible, otherwise the difference frequency is masked by all the other frequencies. 

<p class="t-pic"><img src="intermod-f3.gif" border="1" /><br />Figure 3 - IMD With Asymmetrical Distortion (1 Diode)</p>

<p>As you can see, there is a never ending stream of harmonic and non-harmonic frequency content. I stopped the trace at 10kHz, but it extends to infinity. After 8kHz the levels are less than 1mV (~70dB below the fundamentals). This also applies to the next trace, and there's no point continuing after the harmonic content is buried in noise as will be the case with a 'real' (as opposed to simulated) test. 

<p>To make it easier to see which is which, I made the FFT green to match the green trace in Figure 2 and the FFT below is red to match the red trace. 

<p class="t-pic"><img src="intermod-f4.gif" border="1" /><br />Figure 4 - IMD With Symmetrical Distortion (2 Diodes)</p>

<p>So, having looked at the simulated harmonic structure shown in Figures 3 and 4 we can make some observations. As you can see, both charts have exactly the same voltage and frequency ranges, so it's easy to compare the levels of all harmonics and intermodulation products. You can see the difference frequency at 100Hz, along with additional harmonics at 200Hz, 300Hz, etc. These diminish up to 500Hz, after which they start getting larger again. The sum frequency is 2.1kHz - again, clearly visible in the asymmetrical case (Figure 3) but missing entirely with symmetrical distortion.

<p>The difference frequencies are also visible with symmetrical distortion, but at significantly lower levels. At 100Hz, the difference is 75dB - the symmetrical distortion circuit produces a difference frequency (100Hz) that is almost 75dB <i>lower</i> than the 100Hz component from the asymmetrical circuit. Now, look closely at Figure 4 again.

<p>Right where the sum frequency should be (2.1kHz), there is ... nothing. Zip. Bugger all. So, symmetrical distortion not only eliminates the difference frequency, but there is no sum frequency either. Everyone keeps saying that intermodulation distortion creates sum and difference frequencies, but it <i>only</i> does so when either the non-linear circuit or the input waveform is asymmetrical! 

<p>You can see easily that the FFT for symmetrical distortion is much less cluttered than that with asymmetrical distortion, yet it still manages to sound slightly harsher. This is despite the fact that there are only harmonic artefacts, but comaparatively little by way of intermodulation.  

<p>This is counter-intuitive and unexpected, especially since the harmonic distortion levels are quite similar (12.85% symmetrical vs 12.67% asymmetrical). It is likely that all non-linear circuits will show similar performance, at all levels. I also simulated a simple one-transistor amplifier and got very similar results (asymmetrical of course), with less than 1% THD, the sum and difference frequencies are very prominent as expected.

<p>When the level is reduced, so too is the distortion, but the ratios will remain much the same between symmetrical and asymmetrical distortion mechanisms. Bear in mind that music is rarely symmetrical, and it doesn't matter if the signal or distortion mechanism is asymmetrical - either gives the same result. It's only when <abbr title="total harmonic distortion + noise">THD</abbr> is reduced to less than 0.1% that intermodulation products are reduced to an acceptable level. It's important to note that <i>any</i> amplifying device that introduces harmonic distortion will also create intermodulation products - the two are inextricably interrelated. As THD is reduced, so too is IMD. No amplifier of any kind has ever been built that has significant (ie. measurable) THD but no IMD and vice versa.</p>

<hr /><b>Bench Tests</b>
<p>There are a few other traces for you to look at. The following were captured using my digital oscilloscope, and show the waveform and FFT for each. I used 1.0kHz and 1.2kHz for these because the 200Hz difference frequency is easier to hear with small speakers. You can also listen to the waveforms - <a href="sounds/intermod.mp3">intermod.mp3</a>. The first 3.5 seconds is with both diodes, and the remaining 3.5 seconds uses only one diode. Listen for the 200Hz tone that becomes (more) audible at the halfway point in the file. 

<p>The first two traces were captured directly across the diodes, and the second two were captured from the wiper of the pot. Even though there is a resistor between the output and the diodes, the distortion is quite visible and was also audible. (I actually used 7.5k resistors because they were the first to hand). Note that the signal waveform is different in some of the following traces. This does not mean that anything significant is different, only that the phase relationship between the two sinewaves has changed ever so slightly. This is <i>not</i> audible.

<p class="t-pic"><img src="intermod-f5.png" border="1" /><br />Figure 5 - Oscilloscope Trace, IMD With Symmetrical Distortion (2 Diodes)</p>

<p>You can see the first set of harmonics at 3kHz and 3.6kHz and the next set at 5 and 6 kHz. Seventh harmonics are also just visible before everything disappears below the noise level. In the next trace, you can now see both odd and even harmonics, as well as the difference frequency (200Hz) at the left of the screen. Note that the 4th harmonic is not present. If you refer back to Figure 3 you will see that the 4th harmonic group is less than for the 5th harmonic group too - the simulation and real life are remarkably close. 

<p class="t-pic"><img src="intermod-f6.png" border="1" /><br />Figure 6 - Oscilloscope Trace, IMD With Asymmetrical Distortion (1 Diode)</p>

<p>The next two traces were captured at the pot wiper, with a 7.5k resistor between the pot and the diode(s). The oscilloscope and monitor amp were connected to the pot wiper, and the diode(s) are partially isolated by the resistor. Distortion is not readily visible on the waveform, but can still be seen in the FFT and is readily audible. The first set of harmonics (around 2kHz) is 30dB below the fundamentals rather than ~18dB in the first two examples in this section.
 
<p class="t-pic"><img src="intermod-f7.png" border="1" /><br />Figure 7 - Oscilloscope Trace, IMD With Symmetrical Distortion (2 Diodes, 7.5k)</p>

<p>The amplitude of the two fundamentals is greater because the measurement was taken from the pot wiper. Distortion is not visible on the waveform, but is clearly evident in the FFT trace. There are two things that tell you instantly which is which - the first is the presence or otherwise of the difference frequency (200Hz), and the other is the nature of the harmonics. Symmetrical distortion has no even harmonics.
  
<p class="t-pic"><img src="intermod-f8.png" border="1" /><br />Figure 8 - Oscilloscope Trace, IMD With Asymmetrical Distortion (1 Diode, 7.5k)</p>


<p>You will most likely find that the asymmetrical distortion actually sounds less harsh than the symmetrical version, despite the fact that it has more harmonics overall. Like so many other things, this is probably not what you would normally expect.</p>

<hr /><b>Conclusions</b> 
<p>It's interesting (to me anyway) that it seems that no-one else has ever thought to verify that sum and difference frequencies are not created when symmetrical distortion is applied to a complex (but symmetrical) waveform. It's important to understand that if the input <i>waveform(s)</i> is/are asymmetrical, then even a symmetrical clipping circuit as demonstrated here will still cause asymmetrical distortion, so in some respects it's a moot point. I also tested this by clipping <i>one</i> of the input signals before it reached the pot, and as expected the difference between one and two clipping diodes disappeared.

<p>Be that as it may, this has been a very interesting bit of research that has revealed something I've never seen mentioned. Like much research, the end result isn't terribly useful to anyone because 'real world' signals will rarely be perfectly symmetrical when looked at over any sensible period of time. Just like it's entirely possible for all the violins in an orchestra to be in phase for brief periods (which will seriously mess up a surround decoder [<a href="#ref">2</a>]), it's also a given that there will be brief periods where an audio waveform (for example) is perfectly symmetrical.  

<p>Just in case anyone is wondering just how I came across this intriguing phenomenon, it was while I was testing the hypothesis that even-order distortion sounds "nicer" than odd-order distortion. In the process, I was listening to two tones and heard the difference frequency disappear when I switched from asymmetrical to symmetrical clipping. "That's interesting" I thought, and the rest is history <img src="grin.gif" />.

<p>Despite the marginally "softer" sound with one diode, the whole exercise belies the claims made by those who say that second harmonic distortion is pleasant and adds to the music. It doesn't do anything of the sort. It is also important to understand that second harmonic distortion by itself never exists in any real-world amplifying device - it is invariably accompanied by higher orders of even harmonics (4th, 6th, 8th, etc.) and <i>odd harmonics</i>. The odd harmonics simply come with the territory, and are free. Using push-pull circuitry (symmetrical) can all but completely cancel even harmonics, leaving only the odd harmonics. These are somewhat less intrusive - primarily because the levels of <i>all</i> harmonics are reduced significantly. Adding feedback (proper negative feedback, <i>not</i> simple emitter/cathode degeneration) will reduce distortion further.

<p>Provided the amplifier has reasonable open-loop bandwidth and is fairly linear to start with, negative feedback will reduce all harmonics and IMD. The latter is by far the most crucial, and only when intermodulation distortion is minimised can you really claim to have a transparent amplifying device.

<p>On the basis of this new information, it is likely that the vast majority of intermodulation distortion tests are meaningless. Using a 19kHz and 20kHz tone and expecting to see 1kHz is fine, but it will only work if the amplifier being tested has asymmetrical distortion. With most real-world push-pull amplifiers, or any other topology that has very low levels of second harmonic distortion, the standard test will be decidedly optimistic, and may fail to show the real IMD caused by the amplifier.</p> 

<hr /><a id="ref"></a><b>References</b>
<p>I'd love to have been able to include some references, but there aren't any ... other than the following snippets

<ol>
	<li><a href="http://www.nutshellhifi.com/library/FindingCG.html" target="_blank">The Sound of the Machine</a> - Lynn Olsen <small>(Note that I do not agree with many 
	of the points made in the article, but the comment about in-phase violins amused me.)</small>
	<li>"Electronic Instruments And Instrumentation Technology", by M.M.S. Anand (p 302) - ISBN	8120324544, Prentice-Hall of India Pvt.Ltd
</ol>


<hr />
<center>&nbsp;
<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<hr /><a href="../articles.htm" OnMouseOver="document.b1.src='a.gif';" OnMouseOut="document.b1.src='a1.gif';">
<img src="a1.gif" name="b1" alt="Index" border=0 height=24 width=40 /></a><b>Articles Index</b>
<br /><a href="../index2.html" OnMouseOver="document.b3.src='a.gif';" OnMouseOut="document.b3.src='a1.gif';">
<img src="a1.gif" name="b3" alt="ESP Home" border=0 /></a><b>Main Index</b><br /><br />

<table BORDER BGCOLOR="black">
<tr><td class="t-wht"><a id="copyright"></a><b>Copyright Notice.</b>This article, including but not limited to all text and diagrams, is the intellectual property of Rod Elliott, and is Copyright &copy; 2012. Reproduction or re-publication by any means whatsoever, whether electronic, mechanical or electro-mechanical, is strictly prohibited under International Copyright laws. The author grants the reader the right to use this information for personal use only, and further allow that one (1) copy may be made for reference while constructing the project. Commercial use is prohibited without express written authorisation from Rod Elliott.</td></tr>
</table>
<div class="t-sml">Page Created and Copyright &copy; Rod Elliott 20 September 2012</div>
</body>
</html>
