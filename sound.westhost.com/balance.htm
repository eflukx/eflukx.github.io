<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Uwe Beis / Rod Elliott">
   <meta name="description" content="Balanced Line Driver with Floating Output - High performance active balanced line driver rivals transformer.">
   <meta name="keywords" content="balanced, line, driver, professional, audio, diy, fi-fi, electronic">
   <title>Balanced Line Driver with Floating Output</title>
<!-- Balanced Line Driver with Floating Output - High performance active balanced line driver rivals transformer. -->
  <link rel="StyleSheet" href="esp.css" type="text/css" media="screen, print">
  <style TYPE="text/css"><!-- td { font-size: 10pt } th { font-size: 10pt } --> </style>
  <link rel="shortcut icon" type="image/ico" href="favicon.ico">
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<table width="100%"><tr><td><img SRC="esp.jpg" alt="ESP Logo" height=81 width=215>
<td align="right">

<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</table>

<table WIDTH="100%" BGCOLOR="blue"><tr><td class="hdrl">&nbsp;Elliott Sound Products</td>
<td ALIGN=RIGHT class="hdrr">Balanced Line Driver with Floating Output&nbsp;</td></tr></table>

<p align="center">Copyright&nbsp; &copy; 2002 - Uwe Beis (Edited by Rod Elliott)<br />
<small>Page Created 30 March 2002<br />
Updated 10 Feb 2012</small></p>

<!-- AddThis Button BEGIN -->
<script type="text/javascript">
var addthis_config = {
    data_track_clickback: true
}
</script>

<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<div class="addthis_toolbox addthis_default_style">
<a href="http://addthis.com/bookmark.php?v=250&amp;username=rode" class="addthis_button_compact">Share</a>
<span class="addthis_separator">|</span>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_myspace"></a>
<a class="addthis_button_google"></a>
<a class="addthis_button_twitter"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=rode"></script>
<!-- AddThis Button END -->

<hr><a href="articles.htm" OnMouseOver="document.t1.src='a.gif';" OnMouseOut="document.t1.src='a1.gif';">
<img SRC="a1.gif" NAME="t1" ALT="Index" BORDER=0 height=24 width=40></a><b>Articles Index
<br><a href="index2.html" OnMouseOver="document.t2.src='a.gif';" OnMouseOut="document.t2.src='a1.gif';">
<img SRC="a1.gif" NAME="t2" ALT="ESP Home" BORDER=0 height=24 width=40></a>Main Index</b><br />

<hr><a NAME="contents"></a><b>Contents</b>
<ul>
	<li><a href="#intro">Introduction</a></li>
	<li><a href="#intro2">Editorial Update</a></li>
	<li><a href="#why">Why Use Balancing?</a></li>
	<li><a href="#receivers">Balanced Line Receivers</a></li>
	<li><a href="#bal-vs-float">Balanced Line Drivers vs. Floating Balanced Line Drivers</a></li>
	<li><a href="#floating">A Balanced Line Driver with Floating Output</a></li>
	<li><a href="#perf-meas">Performance Measurements</a></li>
	<li><a href="#sim-results">Simulation Results</a></li>
	<li><a href="#assembly">Practical Assembly and Adjustment</a></li>
	<li><a href="#performance">Static Performance</a></li>
	<li><a href="#dynamic-perf">Dynamic Performance</a></li>
	<li><a href="#input-improve">Further Improvements - Input Options</a></li>
	<li><a href="#conc">Conclusion</a></li>
	<li><a href="#justify">Justification (Why isn't it perfect?)</a></li>
</ul>

<hr><b>Transformerless Balanced Line Driver with Floating Output</b>
<p><a NAME="intro"></a><b>Introduction</b>

<p>The article presented is a contributed design by Uwe Beis. Uwe has built and tested the unit as shown, and although more complex than the balanced line drivers and receivers presented in the original versions in the Project Pages (see <a href="project51.htm">Project 51</a> for details), it also has better performance.

<p>However (and this is important), the sensitivity to component tolerance is high, and thermal drift will cause the circuit's characteristics to change. It is very important that Uwe's recommendations are followed closely with regard to the tolerance and type of resistors used. I have simulated the circuit, and also built one using 5% carbon film resistors to see just how far off the circuit would be. Although it worked (after a fashion at least), the balance and frequency response were quite different for each output. After trimming (using a pot, and experimenting until I found the best spot for it), the performance was excellent, but just heating any of the 10k resistors with my fingers was enough to disturb the balance.

<p>Metal film resistors are very much better than carbon in this respect, and are essential in a circuit such as this.

<p>Additional testing and simulations of the circuit have revealed that there is a sensible trade-off that can be made, simply by increasing the values of 2 resistors. Although the modification degrades the "perfect" balance, in reality there is only about a 0.4dB loss of signal when the circuit is connected in unbalanced mode, and this is well within the acceptable range (IMO).

<p>The simplified version requires no adjustments. Mine uses an unbalanced input, but a balanced input can be added in the same way as with Uwe's circuit. Generally, an unbalanced input will be the most common, since if the internal circuitry is already balanced, there is little need to do it again. See <a href="project87.htm">Project 87</a> for all the details.

<p>The following is Uwe's original material with a very small number of changes. Note that I have made minimal corrections to the grammar - Uwe is from Germany, and his English is extremely good. You will still see some evidence of his origins, but to remove all of these would be to lessen the value of the original text (IMHO anyway).<img SRC="esp-eot.gif" /></p>

<p><a id="intro2"></a><b>Editorial Update</b>
<p>There are a few things that must be understood about balanced circuits, and I must thank Bill Whitlock (<a href="http://www.jensen-transformers.com" target="_blank">Jensen Transformers</a>) for pointing out a couple of things. I have discussed both points elsewhere, but they definitely bear repeating here.

<p>Firstly, it is commonly (but very much mistakenly) assumed that signal balance is important, but this is not correct. In reality, it doesn't matter at all if a balanced line has all its signal on one lead, and none on the other. What <i>is</i> important is impedance, and the signal leads of balanced lines must have the exact same value of impedance to earth/ground/common at all frequencies of interest. Ideally, this should be as high as possible for both the send and receive circuits. The <a href="http://www.jensen-transformers.com/an/ingenaes.pdf" target="_blank">InGenius&reg;</a> IC (licensed to THAT Corp.) is a solution that provides a much higher impedance to earth than normal balanced line receiver circuits, and it's worthwhile to have a look at the PDF to understand all the reasons.

<p>In reality, balanced receiver circuits are extremely hard to get right, and all active solutions have a limited impedance, often made worse by the addition of capacitors to reduce EMI and/or high frequency noise. Bill Whitlock says "Transformers outperform all conventional input stages for one very simple (and, to me, obvious) reason: transformers have incredibly high common-mode input impedance. In the real world, simply matching these impedances is not enough - they must also be very, very high. With transformers, they are inherently in the area of 50 M-ohms at 50 or 60 Hz,
and rejection is so high that it became taken for granted ... and seemingly, everyone who ever knew why either forgot or died! Ordinary balanced line receivers have common-mode input impedances in the area of 50 k-ohms ... a factor of 1000 less than a transformer (or the InGenius&reg; input stage)."

<p>Secondly, send circuits ('transmitters' if you like) should also have a high impedance to earth, and the circuit shown here does just that. However, it must be understood that the circuits shown are useful, but only to a limited degree. While there is no doubt that the circuit performs well, it is easily disturbed by cable capacitance and can become unstable. Because it uses positive feedback to achieve the high effective impedance to earth, it doesn't take much of an imbalance somewhere to cause oscillation - certainly something that should be avoided.

<p>Ultimately, there is no active balanced send or receive circuit that can match a good transformer - this does not include $20 mic transformers you can purchase from retail electronics outlets! As noted above, the windings of (good) audio transformers have an extraordinarily high impedance to earth unless the centre tap is earthed - generally a very bad idea. If you need to provide phantom power via the transformer centre tap, this ruins the inherent high impedance, but the far end will be a microphone, and is floating. A low impedance to earth is not such a great concern then, as there is no earth reference at the far (microphone) end, other than the mic body which is connected back to the mixer anyway.

<p>It is very important that the true principles of balanced lines are understood properly, but this is often not the case. Many people concentrate on signal symmetry, but neglect the requirement for a very high common mode impedance and/or impedance matching of the two inputs or outputs. Note that this does <i>not</i> imply that input and output impedances be matched, because doing so reduces signal level by 6dB and may overload send amplifiers - whether opamp or transformer based. Transformers provide an almost perfect match when the input or output winding is floating, and will nearly always give the best results in harsh conditions.

<p>Predictably, most people shy away when they see the prices, so opt for (often simple) active circuits instead. Under relatively benign conditions with no heavy interference sources this is often quite alright, and works just fine. Just remember though - just because you have a balanced line, this doesn't mean that you'll get no noise. Oh, and I must point out that balanced lines don't sound 'better' unless better is defined as lower noise or interference. <img src="esp-eot.gif" /></p> 

<hr><a NAME="why"></a><b>Why Use Balancing?</b>
<p>In the professional audio industry analogue information is transmitted as a balanced signal over symmetrical cables. The big advantage of this method is that interferences of the signals by ground loops can be totally eliminated. To balance device-internal signals, where they are usually unbalanced, transformers are often used. Transformers have another very welcome side effect: They can completely galvanically decouple source and destination, i.e., there is no ground loop they are not just compensated, in fact they do not exist any more. One transformer, either at the output or at the input, is sufficient for that, but professional equipment usually
uses transformers at its inputs and outputs.

<p>It is well known to use electronic circuits instead of transformers to balance signals at the outputs or to unbalance them at the inputs. The advantage is that this is cheap, small and works easily from DC up to very high frequencies. One major disadvantage is that they cannot handle voltages - particularly common mode voltages - greater than their operating voltage. Rod has written some more explanation about balanced signals in his project "<a href="project51.htm" target="_blank">Balanced Line Driver</a>".

<p>From here on we should discriminate the difficulties between balanced inputs and outputs.

<hr><a NAME="receivers"></a><b>Balanced Line Receivers</b>
<p>The line receiver Rod describes is a single op-amp one. It is derived from the basic differential amplifier circuit. Its inputs are not totally symmetrical, i.e. signals at the -In "see" a lower impedance than those at +In. Furthermore signals at +In are "visible" at -In while vice versa this is not the case. For higher performance the following circuit is often used ...

<center><p><img SRC="bal2-f1.gif" ALT="Figure 1" BORDER=1>
<br><b><font size=-1>Figure 1 - Improved Balanced Line Receiver</font></b></center>

<p>Both inputs may be directly connected to the incoming signal - there are no resistors in between. This improves noise performance so that this circuit is well suited for microphone preamps. Furthermore there is no feed-back from the output to any input so that the inputs may have any input impedance up to nearly infinite. The common mode rejection ratio is determined by the precision of the resistors R and will be about 40dB with 1% resistors. With only one additional resistor RGain the gain can be increased without decreasing the common mode rejection ratio. Or, in other words, the ratio between differential and common mode gain is further improved.

<p>Another improved version can be found in <a href="project66.htm" target="_blank">project 66</a>, which is based on a dual transistor differential input.

<p>All in all, balanced line receivers are quite easy to realise with little effort. With the exception of the limited common mode range they easily can come close to the performance of transformer coupled inputs. They are no challenge - so I do not want to discuss them here further.

<hr><a NAME="bal-vs-float"></a><b>Balanced Line Drivers vs. Floating Balanced Line Drivers</b>
<p>The line driver Rod describes in his article is quite simple too. There is nothing to grumble at (<img src="grin.gif" />), but there is one essential difference between an output like the described one and a transformer coupled one: The common mode output resistance. A common voltage applied to the output will cause a considerable common mode current into the outputs - the output is not floating. Example: The differential output resistance in his project is 2 x 220 Ohm = 440 Ohm. If you apply a common mode voltage U at both outputs, a current of 2 x U / 220 Ohm will flow, i.e., the common mode output resistance is 110 Ohm (1/4 of the differential output resistance).

<p>Or, another and more important point of view: With transformer coupled outputs you may short either output to ground or apply any voltage there - you will still have the full output voltage across its output ports. If you do this on one output of the simple push-pull amplifier it will not affect the other one. You can even connect several transformer coupled outputs in series and by this way sum all output voltages. This, of course, is not possible with a push-pull amplifier output stage which "looks" like a balanced output with a centre tapped earth reference.

<p>I call transformer coupled outputs "floating outputs", because by nature they have a high or infinite common mode output resistance. So I was looking for a transformerless amplifier with floating outputs, and this is where my story starts. (Even though I'm afraid there is nobody out there raising his hand and shouting "Yes that's it! That's what I was always looking for!")

<hr><a NAME="floating"></a><b>A Balanced Line Driver with Floating Output</b>
<p>I must admit I never really investigated in circuits to be found in literature or in the www, because on one hand I very soon had an idea myself for an appropriate circuit and on the other hand I cannot remember ever having seen anything like this before. I have since seen the schematics for the <a href="http://products.analog.com/products/info.asp?product=SSM2142">Analog Devices SSM2142</a> which uses almost exactly the principle described here and the complement from THAT corporation, the <a href="http://thatcorp.com/datashts/1420data.pdf">THAT1420/30</a>. I should also mention the <a href="http://pdfserv.maxim-ic.com/arpdf/MAX435-MAX436.pdf">Maxim MAX435</a>, a so-called "Wideband Transconductance Amplifier with Differential Output", which is somewhat similar but somewhat different too. At least it has a floating balanced output.

<p>My basic circuit not only has balanced outputs but balanced inputs too and looks like this ...

<center><p><img SRC="bal2-f2.gif" ALT="Figure 2" BORDER="1">
<br><b><font size=-1>Figure 2 - Basic Form of Balanced Line Driver</font></b></center>

<p>Explanation of the indices used:<br>

<table><tr><td>A, B (R<b>A</b>NI):</td><td>A: "Upper" ("positive") resp. B: "lower" ("negative") half</td></tr>
<tr><td>N, P (RA<b>N</b>I):</td><td>Connected to the negative (N) resp. positive (P) input</td></tr>
<tr><td>I, O (RAN<b>I</b>):</td><td>Connected to the input (I) resp. output (O) op-amps</td></tr>
<tr><td>C (RA<b>C</b>):</td><td>Used to compensate RAO resp. RBO</td></tr></table>

<p>No bias resistors are shown. The input stage is used to buffer the input signal so that the inputs may be dimensioned for almost ideal properties while the actual line drive is supplied with the required low impedance source.

<p>The whole amplifier, as it is dimensioned here, has a gain of 1. The same amount of voltage across the input terminals appears across the output terminals. This remains true if any output terminal is supplied with any voltage - like transformer coupled outputs do (provided both output voltages stay within the supply voltage area of course). This is a consequence of the fact that the common mode output resistance (R<sub>COut</sub>) is high.

<p>The differential output resistance (R<sub>DOut</sub>) is low, but not zero. It is determined by the resistors R<sub>AO</sub> and R<sub>BO</sub>  and equal to it. In fact, R<sub>COut</sub>and R<sub>DOut</sub> (the output resistance in differential mode) are coupled at each other by the precision of the applied resistors. As R<sub>DOut</sub> does not need to be very low and R<sub>COut </sub> should be as high as possible, it seems obvious to start with a reasonable differential mode output resistance (R<sub>DOut</sub> = R<sub>XO</sub>) of 100 Ohm.

<p>As mentioned, it is obvious that the precision of the resistors must have a certain influence on the performance of the whole circuit. But what is "the performance" of such a circuit?

<p>The primary target obviously is a high R<sub>COut</sub>at a given R<sub>DOut</sub>. But at least three side effects must be kept in mind:

<p>A common mode input voltage shall neither be visible at the outputs in common output mode nor in differential output mode (just like with transformers). The "Common to Common Mode Rejection Ratio" (CCMRR) and the "Common to Differential Mode Rejection Ratio" (CDMRR) tells about that. Furthermore a differential input signal shall not be visible at the outputs in common output mode. I call this "Differential to Common Mode Rejection Ratio" (DCMRR).

<p>Of course differential input signals shall be visible at the outputs in differential output mode - this is simply called gain and by design always so close to the desired value that it does not need to be discussed.

<p>Now we know one "primary target" (the common mode output resistance R<sub>COut</sub>) and three "side effects" (CCMRR, CDMRR and DCMRR) to characterise the performance. I presume two more properties "gain" and "output resistance" as sufficiently precise given by design. I neglect other side effects and all input properties.
<p>Now we can restart with the perception that it is obvious that the precision of the resistors must have a certain influence on the performance of the whole circuit and to find out this performance.

<hr><a NAME="perf-meas"></a><b>Performance Measurements</b>
<p>I could have tried to put the whole circuit into formulas and to solve the formulas in a way, that the influence of varying resistors on our target R<sub>COut</sub> is directly visible, or I could have done this by simulation. Unfortunately my Pspice evaluation version does not support circuits as complex as this one. So at my first approach I preferred to measure the performance in a real circuit. Later I learned more by doing simulations, but I will come back on this later.

<p>For my experimental circuit I thought about how to select the resistors. It seemed obvious that all ratios R<sub>XYI</sub> / R<sub>XYO</sub> had to be the same (replace X by A or B and Y by P or N). Furthermore all sums R<sub>XYI</sub> + R<sub>XYO</sub> had to be equal. At last all R<sub>XO</sub> and R<sub>XC</sub> should be the same.

<p>But you cannot buy parts with equal values, so you have to live with similar ones. I bought 12 resistors with 10 kOhm and 4 with 100 Ohms, all specified with 0.1%. The cost of each is approx. $US0.20. I intended to select them so that the sums R<sub>XYI</sub> + R<sub>XYO</sub> are as equal as possible. Fortunately I have a 4 1/2 digit multimeter so that I could measure out 4 pairs of 10 kOhm resistors with difference of the summed resistances less than 2 Ohm. In order to meet the required equality of the ratios R<sub>XYI</sub> / R<sub>XYO</sub> I added three 10 Ohm 15-turn trimpots. The result was the following circuit:

<center><p><img SRC="bal2-f3.gif" ALT="Figure 3" BORDER="1">
<br><b><font size=-1>Figure 3 - Balanced Line Driver</font></b></center>

<p>Why R<sub>AOG</sub> and R<sub>BOG</sub>? With ideal parts the output resistance R<sub>COut</sub> becomes infinite. With real ones it may become either positive or negative. If R<sub>COut</sub> is negative, the outputs run to one of the supply rails and remains there - the circuit does not work properly, it is unstable. Thus R<sub>AOG</sub> and R<sub>BOG</sub> are introduced: R<sub>AOG</sub> parallel to R<sub>BOG</sub> must at least be lower than -R<sub>COut</sub> to guarantee stability. But R<sub>AOG</sub> and R<sub>BOG</sub>also symmetrise the output signal, and the lower R<sub>XOG</sub> / 2 is compared to R<sub>COut</sub>, the better the output is balanced. At the end, an extremely high R<sub>COut</sub> (without R<sub>XOG</sub>) is only good for a reasonable R<sub>COut</sub> (including R<sub>XOG</sub>) combined with reasonable common mode rejection ratios. Which explains why I declare a high R<sub>COut</sub> as the primary target. Symmetrising the output means that both outputs have to carry the same voltage (but with opposite signs of course) in case they are open.

<p>The trimpot R<sub>OFFS</sub> is introduced to reduce the remaining common mode DC output current to zero. Particularly without R<sub>AOG</sub> and R<sub>BOG</sub> the remaining common mode DC output voltage caused by the current is extremely high, and just "a sharp look" at the trimpot may cause a difference of several volts.

<hr><a NAME="sim-results"></a><b>Simulation Results</b>
<p>During our discussions Rod gave me the hint to try <a href="http://www.simetrix.co.uk/">SIMetrix Intro</a> as a simulator. SIMetrix was able to simulate this circuit and with this means I discovered an essential relationship between R<sub>COut</sub>, R<sub>DOut</sub> and the resistor tolerances:

<p>Have a look at the schematic in Figure 2 and note that both op-amps are connected in a loop. Under ideal conditions the loop gain G<sub>Loop</sub> is exactly 1. By the simulation I found out that the common mode output resistance R<sub>COut</sub> can be calculated as R<sub>COut</sub> = 2 * R<sub>DOut</sub> / (1 - G<sub>Loop</sub>). As R<sub>COut</sub> shall be as high as possible, G<sub>Loop</sub> has to be as close as possible to 1. A loop gain of 1.01 results in a negative R<sub>COut</sub> of -20 kOhm must be compensated by R<sub>AOG</sub> || R<sub>BOG</sub> &lt; 20 kOhm to maintain stability, but for balancing reasons R<sub>AOG</sub> || R<sub>BOG</sub> should be &lt;&lt; 20 kOhm. To guarantee |R<sub>COut</sub>| >= 20 kOhm G<sub>Loop</sub> must be between 0.99 and 1.01. Keep in mind that there are 8 resistors and their deviations that influence G<sub>Loop</sub>!
That looks difficult, but on the other hand a Monte Carlo analysis teaches that with resistor tolerances of 1% (which theoretically could result in loop gains between 0,99 ^ 8 = 0,92 and 1.01 ^ 8 = 1,08) |R<sub>COut</sub>| will be > 20 kOhm (2 * R<sub>DOut</sub> * G<sub>Loop</sub>) as desired in more than 99% of all cases. Under these circumstances I would recommend R<sub>AOG</sub> = R<sub>BOG</sub> = 4.7 kOhm, which is a fair compromise between the resulting symmetry and the common mode output resistance.

<hr><a NAME="assembly"></a><b>Practical Assembly and Adjustment</b>
<p><b>The experimental board</b>
<br>I built the circuit in my favourite way on a Vero square pad board. I observe special rules for that and I would like to write more about it, but not here. I am quite convinced it looks professionally nice - on both sides of the board.

<center><p><a href="bal2-bd-t.jpg"><img SRC="bal2-bd-ts.jpg" ALT="Figure 4 - Front of board (click to enlarge)" BORDER=0 height=211 width=250></a>
<a href="bal2-bd-b.jpg"><img SRC="bal2-bd-bs.jpg" ALT="Figure 4 - Rear of board (click to enlarge)" BORDER=0 height=211 width=250></a>
<br><b><font size=-1>Figure 4 - Front and Rear of Veroboard Layouts</font></b></center>

<p>In order to be easy to change, all resistors and op-amps are pluggable.

<p>The power supply is symmetrical. As almost no current flows out of and into the ground rail, a single, floating supply may be used with the ground rail artificially generated by a resistor divider of 2 x 1 kOhm. Actually none of the I/O- and power connector's ground pins needs to be connected externally.

<p>The gain of the input stage may be raised with an additional resistor R<sub>GAIN</sub>, similar to the resistor R<sub>Gain</sub> above. The gain of the output stage may additionally be altered by varying the ratios of R<sub>XYI</sub> / R<sub>XYO</sub>.

<p>In order to adjust the ratios R<sub>XYI</sub> / R<sub>XYO</sub> I unplugged all op-amps, connected the (former) outputs of the input op-amps (IC1, pins 1 and 7) together to V- and the (former) outputs of the output op-amps (IC2 and 3, pins 5) together to V+. R<sub>AG</sub> and R<sub>BG</sub> must be removed. With the multimeter the voltage between the "untrimmed" op-amp (IC2, pin 2) input and the three trimmed op-amp inputs (IC 2, pin 3 and IC 3, pins 2 and 3) now can be minimised so that the balance between the dividers is extremely high - a resolution of 10 uV from 10V corresponds to 10E-6 or 0.0001%! But don't ask me about
long term or temperature stability.

<hr><a NAME="performance"></a><b>Static Performance</b>
<p>In order to find out more about the consequences of resistor deviations, I paralleled a resistor to 1.: R<sub>ANI</sub>, 2.: R<sub>ANO</sub>, 3.: R<sub>ANI</sub> + R<sub>ANO</sub> and 4.: R<sub>AO</sub>. The resistances were reduced by 1%.
<p>The table shows the results without R<sub>AG</sub> and R<sub>BG</sub>. Without these resistors I<sub>COut</sub> rather than U<sub>COut</sub> for or CCMRR and DCMRR have to be measured.

<center>
<table width=640 border=1 style="border-collapse: collapse">
<tr><td ALIGN=CENTER>&nbsp;</td><th>Name</th><th>Formula</th><th>Units</th><th>Nominal</th><th>-1% R<sub>ANI</sub></th><th>-1% R<sub>ANO</sub></th><th>-1% (R<sub>ANI + </sub> R<sub>ANO</sub>)</th><th>-1% R<sub>AO</sub></th></tr>
<tr><td ALIGN=CENTER>R<sub>COut</sub></td>
<td>Common Mode Output Resistance excl. R<sub>XOG</sub></td>
<td>U<sub>COut</sub>/I<sub>COut</sub></td>
<td ALIGN=CENTER>Ohm</td><td ALIGN=CENTER>>> 10 M</td><td ALIGN=CENTER>~ -20 k</td>
<td ALIGN=CENTER>~ +20 k</td><td ALIGN=CENTER>-1.2 M</td><td ALIGN=CENTER>-2.5 M</td></tr>
<tr><td ALIGN=CENTER>R<sub>COut</sub></td>
<td>Common Mode Output Resistance incl. R<sub>XOG</sub></td>
<td>U<sub>COut</sub>/I<sub>COut</sub></td>
<td ALIGN=CENTER>Ohm</td><td ALIGN=CENTER>5 k</td><td ALIGN=CENTER>~ 4 k</td>
<td ALIGN=CENTER>~ 6 k</td><td ALIGN=CENTER>5 k</td><td ALIGN=CENTER>5 k</td></tr>
<tr><td ALIGN=CENTER>CCMRR</td><td>Common to Common Mode Rejection Ratio</td>
<td>U<sub>CIn</sub>/U<sub>COut</sub></td>
<td ALIGN=CENTER>-</td><td ALIGN=CENTER>> 1000<br>(60 dB)</td><td ALIGN=CENTER>~ -3
<br>(10 dB</td><td ALIGN=CENTER>~ +5<br>(14 dB)</td><td ALIGN=CENTER>-120<br>(42 dB)</td>
<td ALIGN=CENTER>-500<br>(54 dB)</td></tr><tr>
<td ALIGN=CENTER>CDMRR</td><td>Common to Differential Mode Rejection Ratio</td>
<td>U<sub>CIn</sub>/U<sub>DOut</sub></td>
<td ALIGN=CENTER>-</td><td ALIGN=CENTER>> 1E4<br>(80 dB)</td><td ALIGN=CENTER>~ 300<br>(50 dB)</td>
<td ALIGN=CENTER>~ 550<br>(55 dB)</td><td ALIGN=CENTER>> 1E4<br>(80 dB)</td><td ALIGN=CENTER>> 1E4<br>(80 dB)</td></tr>
<tr><td ALIGN=CENTER>DCMRR</td><td>Differential to Common Mode Rejection Ratio</td>
<td>U<sub>DIn</sub>/U<sub>COut</sub></td>
<td ALIGN=CENTER>-</td><td ALIGN=CENTER>~ +400<br>(52 dB)</td>
<td ALIGN=CENTER>~ +6<br>(16 dB)</td><td ALIGN=CENTER>~ -10<br>(20 dB)</td>
<td ALIGN=CENTER>~ +140<br>(43 dB)</td><td ALIGN=CENTER>~ +160<br>(44 dB)</td>
</tr></table></center>

<p>The common mode output resistance excl. R<sub>XOG</sub> in this experimental circuit is extremely high. But only one of the resistors R<sub>XYI</sub> or R<sub>XYO</sub> changed by 1% reduces the common mode output resistance down to +/-20 kOhm, which, in my opinion, is hardly at the edge of being acceptable. During my experiments it seemed plausible to me that with an 1% error the output resistance could not be very different from 100 or 200 times the output resistance. Later, with the simulations, I learned to know the exact relation of 200 for 1% error.

<p>Altering either R<sub>ANI</sub> or R<sub>ANO</sub> imbalances the divider network at the op-amps input. Altering both by the same amount causes no imbalance here, but somewhere else where it is obviously much less critical. The same applies to an alteration of R<sub>AO</sub> and R<sub>BO</sub>.

<hr><a NAME="dynamic-perf"></a><b>Dynamic Performance</b>
<p>The frequency response of this amplifier reaches from DC far beyond the need of audio circuits. As two op-amps are partially connected in a loop, a danger of self-oscillation arises. In fact, with a square wave input signal some ringing can be observed at a few MHz. With an input frequency around a few MHz the amplifier becomes unstable. The NE5534 as a single op-amp is meant to be compensated by an external capacitor (C<sub>A</sub> and C<sub>B</sub>, ~22 pF each). Using these does not improve the situation in this special circuit: The frequency of the ringing not only lowered but it is also "un-damped", i.e. the ringing lasts for more periods. It turned out to be best to omit both capacitors and to care that higher frequencies are blocked out. I did not notice any danger of self-oscillation with various resistive or capacitive loads. <p>In my previous text I wrote about output resistances R rather than output impedances Z because I primarily looked at static (DC) values, i.e. the common mode output resistance R<sub>COut</sub> above, which is measured as a DC value. Of course in reality it is a complex value with approx. 2 nF in parallel, so it becomes capacitive at higher frequencies. With output resistors R<sub>AG</sub> and R<sub>BG</sub> of 10 kOhm each, the output impedance up to 10 kHz is predominantly resistive (5 kOhm). With slower op-amps, i.e. TL072, the output impedance will remain resistive up to a few kHz only. I did not care for the dynamic properties of the rejection ratios.</p>

<hr><a NAME="input-improve"></a><b>Further Improvements - Input Options</b>
<p>The inputs of my sample circuit above are equipped with one simple buffer amplifier each. Later (unfortunately too late) I realised that I missed much room for major improvements:

<p>Remember: R<sub>XOG</sub> have been introduced not only to guarantee stability but also to symmetrise the output signal. For this reason I dimensioned R<sub>XOG</sub> extra low. Stability can also be guaranteed by lowering the loop gain, i.e. by just omitting both R<sub>XC</sub> (resulting in a loop gain of 0.98
typically). But just omitting both R<sub>XC</sub> and both R<sub>XOG</sub> results in very poor common mode rejection ratios, i.e., an input signal applied at one input only will appear at the corresponding output only - totally unbalanced.

<p>If both input op-amps are connected as differential amplifiers with complementary outputs, the following output stage will already be supplied with a balanced input signal and needs not to symmetrise the signal any more:</p>

<center><img SRC="bal2-f5.gif" ALT="Figure 5" BORDER=1>
<br><b><font size=-1>Figure 5 - Balancing Differential Preamplifier</font></b></center>

<p>Alternatively, if you have an unbalanced source, you may simplify the design by just inverting the input signal with a single op-amp. Omit R<sub>XC</sub> and R<sub>XOG</sub>and you have the circuit Rod has chosen in his <a href="http://sound.westhost.com/project87.htm">project 87</a> and Analog Devices in the SSM2142 too.

<p>But in both of these alternatives there is a snag: A reverse feedthrough from the outputs to the input(s). Therefore either a low impedance source should be used, or another op-amp connected as a buffer should precede the inverter(s). This will finally lead to "ultimate perfection" ;-)</p>

<hr><a NAME="conc"></a><b>Conclusion</b>
<p>Without the latter input improvement, a common mode output resistance R<sub>COut</sub> of 5 kOhm, determined by R<sub>AG</sub> in parallel with R<sub>BG</sub>, is reasonable, but with resistor tolerances of 1% the asymmetry may become quite high. It is not likely that the amplifier becomes unstable. I prefer to use either 0.1% resistors, or the resistors should be measured out so that R<sub>XYI</sub> / R<sub>XYO</sub> is quite equal or the dividers should be trimmed. With multiple of these measures R<sub>COut</sub> may easily be risen far above 1 MOhm typically.

<p>With the input improvement, R<sub>XC</sub> and R<sub>XOG</sub> should be omitted. By using 1% resistors R<sub>COut</sub> in 99% of all cases will become between 7 and 20 kOhm, combined with very good CMRRs. With 0.1% resistors and both R<sub>XC</sub> = 90 Ohm R<sub>COut</sub> in 99% of all cases will even become between 70 and 200 kOhm.

<p>But do not forget to trim at least one of the op-amps offset voltages: 1 mV offset voltage will cause 400 mV common mode offset voltage if R<sub>COut</sub> is 10 kOhm or even 4 V if R<sub>COut</sub> is 100 kOhm (!). In order to reduce the differential offset voltage too, the offset
voltages of both op-amps must be trimmed. But this seems to me to be less important.</p>

<hr><a NAME="justify"></a><b>Justification (Why isn't it perfect?)</b>
<p>This project is a small, few-weekend project which does not claim to be theoretically, mathematically or scientifically correct and complete. I may have made errors, I may have overlooked better solutions. I was lucky that Rod gave the hint to do the simulation with SIMetrix Intro - as my PSpice Student was too much limited. With this simulation I learned a lot about this circuit.

<p>Rod cared for the circuit to an extent that I really appreciated very much. He "pushed" me to have closer looks to what I was actually doing, to make simulations and lots of things that finally resulted in the current state. Without him it all would look much more amateurish. Rod, I really have to thank you. You are a great editor!

<hr />
<center>&nbsp;
<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<hr><a href="index2.html" OnMouseOver="document.b1.src='a.gif';" OnMouseOut="document.b1.src='a1.gif';">
	<img SRC="a1.gif" NAME="b1" ALT="Index" BORDER=0 height=24 width=40></a><b>Main Index</b>
<br><a href="articles.htm" OnMouseOver="document.b2.src='a.gif';" OnMouseOut="document.b2.src='a1.gif';">
	<img SRC="a1.gif" NAME="b2" ALT="Articles" BORDER=0 height=24 width=40></a><b>Articles Index</b><br /><br />

<table border bgcolor="black">
<tr><td class="t-wht"><a id="copyright"></a><b>Copyright Notice.</b> This article, including but not limited to all text and diagrams, is the intellectual property of Uwe Beis and Rod Elliott, and is Copyright &copy; 2001. Reproduction or re-publication by any means whatsoever, whether electronic, mechanical or electro- mechanical, is strictly prohibited under International Copyright laws. The author (Uwe Beis) and editor (Rod Elliott) grant the reader the right to use this information for personal use only, and further allows that one (1) copy may be made for reference. Commercial use is prohibited without express written authorisation from Uwe Beis and Rod Elliott.</td>
</tr></table>
<div class="t-sml">Page created and copyright &copy; 30 Mar 2002./ Updated 10 Feb 2012 - added editorial update.</div>
</body>
</html>
