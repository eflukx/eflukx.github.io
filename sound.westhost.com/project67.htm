<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<meta name="Author" content="Rod Elliott - Elliott Sound Products">
	<meta name="keywords" content="fast,peak,limiter,audio,project,diy,amp,preamp,circuit,schematic,diagram">
	<meta name="description" content="ESP Project Pages - Fast Audio Peak Limiter. Vastly improved version of a common FET based limiter">
	<!-- ESP Project Pages - Fast Audio Peak Limiter. Vastly improved version of a common FET based limiter -->
	<title>Fast Audio Peak Limiter</title>
	<link rel="StyleSheet" href="esp.css" type="text/css" media="screen, print">
	<style TYPE="text/css"><!-- td { font-size: 10pt } th { font-size: 10pt } --> </style>
	<link rel="shortcut icon" type="image/ico" href="favicon.ico">
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<table width="100%"><tr><td><img SRC="esp.jpg" alt="ESP Logo" height=81 width=215>
<td align="right">

<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</td></table>

<table WIDTH="100%" BGCOLOR="blue"><tr><td class="hdrl">&nbsp;Elliott Sound Products</td>
<td ALIGN=RIGHT class="hdrr">Project 67&nbsp;</td></tr></table>

<br><center><b>Fast Audio Peak Limiter</b><br>By Phil Allison
<br><font size=-1>(Edited By Rod Elliott - ESP)</font></center>

<!-- AddThis Button BEGIN -->
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<div class="addthis_toolbox addthis_default_style">
<a href="http://addthis.com/bookmark.php?v=250&amp;username=rode" class="addthis_button_compact">Share</a>
<span class="addthis_separator">|</span>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_myspace"></a>
<a class="addthis_button_google"></a>
<a class="addthis_button_twitter"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=rode"></script>
<!-- AddThis Button END -->

<hr><b>Introduction</b>
<p>There have been many attempts to create a Voltage Controlled Amplifier / Attenuator (VCA) that is both fast and linear, and many fine examples exist. Unfortunately, many of these are relatively expensive or are difficult to get (or both), and the cheaper ones often just don't seem to make the grade for one reason or another.

<p>The majority of simple VCA circuits have a limited input voltage range, with some exhibiting excessive distortion if the input voltage exceeds as little as 10mV. At such a low signal voltage, noise then becomes a major problem, as well as control voltage "feed-through". This latter effect shows up as very low frequencies being generated by the circuit, and this can easily overload the power amplifier under some circumstances. It is almost a given that these very circumstances will be present when you least expect or need your subwoofer to "bottom out".
<p>A Light Dependent Resistor (LDR) is an excellent (and very low distortion) variable resistance, but most are too slow, and allow a maximum attack time of about 15ms. For many applications, the LDR / LED combination will be quite acceptable (for example with electric guitar or bass), but for stopping an analogue to digital converter from clipping, you really need something faster.

<p>The circuit devised by Phil Allison still has some input voltage limitations, since it is based on a FET. Junction FET VCAs also create considerable distortion, with the worst of it appearing when the signal is attenuated by 6dB. The common way to fix this problem is to apply 1/2 of the drain voltage to the gate, along with the control voltage. Figure 1 shows the conventional way this is done. The predominantly second harmonic distortion is converted by this technique, to become a very much reduced amount of third harmonic distortion. This is further reduced by ensuring that the signal voltage between drain and source is less than 100mV, but the exact voltage is dependent on the FET used.</p>

<center><img SRC="p67-f1.gif" ALT="Figure 1" BORDER=1>
<br><b><small>Figure 1 - "Conventional" VCA Using a JFET</small></b></center>

<p>The arrangement shown looks perfectly reasonable when you first see it, but closer examination reveals that the two 1M resistors form a voltage divider for the control voltage (CV), and this exists until the 100nF cap is charged. The maximum attack time is limited, with a time constant of 100ms as shown. Figure 1 is adapted (for comparative purposes only) from a published circuit from a well respected designer <img src="redface.gif">.
<p>The circuit is only useful if large peaks in signal level are tolerable. If they are, a peak limiter is probably not needed anyway <img src="grin.gif">.

<p>The 25k pot is used to adjust the limiting threshold, which is useful in some circuit configurations.</p>

<hr><b>Description</b>
<p>This audio peak limiter employs a FET as a variable resistance to attenuate the input signal according to a control voltage (CV). It offers unusually good performance with low cost and component count. A TL072 dual opamp (U1) provides the circuit gain and full wave peak detection.

<p>The 4.7K resistor and 1uF capacitor (R14&nbsp; and C5) determine the attack time, which is about 5ms as shown. R12 and C5 determine the release or recovery time, and as shown this is approximately 1 second. 

<p>R11, C3 C4 and R13 form the distortion cancelling circuit, and as can be seen, the control voltage impedance is very low compared to the distortion cancellation impedance, so the circuit's attack time is not compromised. The values of resistance and capacitance have been optimised for the least distortion across the audio band, at 0.3% THD typical for frequencies above around 500 Hz, at 1.65V RMS output level. Below 500 Hz, the distortion rises gently with decreasing frequency, but also falls with lower voltages. Distortion is negligible at any voltage level below the limiting threshold.</p>

<center><img SRC="p67-f2.gif" ALT="Figure 2" BORDER=1>
<br><b><small>Figure 2 - Fast Audio Peak Limiter</small></b></center>

<p>As described above, the attack time with the values shown is 5ms, with a release time of around 1 second. This is a good compromise for most audio material, but is readily changed by altering the values of R14 (attack) and R12 (release). Be careful of values for R14 of less than 1k, as the opamp will be unable to supply the current needed to charge C5. R13 (3k) is easily made using a 1k2 and 1k8 resistor in series. C5 needs to be a low leakage capacitor - either a low leakage electrolytic or a tantalum. A standard electro is inappropriate for this circuit.

<p>In addition, always keep R12 a minimum of 10 times R14 ... for example, if R14 were to be 1k, the minimum value for R12 will be 10k. This would be a very fast limiter indeed!</p>

<center>
<table width="700" border=1 style="border-collapse: collapse" cellpadding="2">
<tr><td width="50%">Maximum Attenuation<td width="50%">40dB
<tr><td>Noise Level (unweighted)<td>-80dB (ref. 1.65V RMS output)
<tr><td>Typical Max. Output Level<td>1.65V RMS
<tr><td>Gain<td>6.8 (16dB)
<tr><td>FET Voltage (at max. o/p)<td>&lt; 45mV typical)
<tr><td>Distortion<td>&lt; 0.5% typical
</table>
<small><b>Brief Specifications</b></small></center>

<p>Figure 3 shows an optional Schmitt trigger indicator circuit.&nbsp; This will indicate the limiting is taking place, with the LED illuminating at approximately 1 dB attenuation, which occurs with a control voltage signal of 1.6V.</p>

<center><img SRC="p67-f3.gif" ALT="Figure 3" BORDER=1>
<br><b><small>Figure 3 - Optional Schmitt Trigger Indicator</small></b></center>

<p>If desired, a LED VU meter may be used here instead, and with proper calibration will give a good indication of the peak attenuation at any time. This option will require some experimentation from the constructor, and further details are up to the individual to work out.</p>

<hr><b>Editor's Notes</b>
<p>This circuit is a vast improvement on the conventional approach as shown in Figure 1. With that circuit, any attempt to make the attack time shorter than about 20ms creates nasty clicks in the signal, as the FET only gets half the initial control voltage during the time it takes to charge the distortion cancellation capacitor. As a result, the attenuation is greatly reduced during this critical period, and the transient is allowed through almost unaffected by the FET.

<p>The resulting "fight" between the FET and control voltage amplifier circuit can also cause the signal level to be reduced too far initially (after the transient), after which it must then recover. The overall
effect is not at all pleasant, and is best avoided. (Note the careful use of gross understatement!) It is precisely this sort of problem that has given some limiters a bad name over the years.

<p>The descriptive text is a mixture of Phil's original description and some additional information provided by the editor.</p>

<hr />
<center>&nbsp;
<script type="text/javascript"><!--
google_ad_client = "pub-1947877433449191";
/* 468x60, created 20/08/10 */
google_ad_slot = "7119701939";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<hr /><a href="projects.htm" OnMouseOver="document.b1.src='arrow.gif';" OnMouseOut="document.b1.src='a1.gif';">
<img src="a1.gif" name="b1" alt="Index" border=0 height=24 width=40></a><b>Projects Index</b>
<br><a href="index2.html" OnMouseOver="document.b3.src='a.gif';" OnMouseOut="document.b3.src='a1.gif';">
<img src="a1.gif" name="b3" alt="ESP Home" border=0></a><b>Main Index</b><br /><br />

<table BORDER BGCOLOR="black">
<tr><td class="t-wht"><a id="copyright"></a><b>Copyright Notice.</b> This article, including but not limited to all text and diagrams, is the intellectual property of Phil Allison and Rod Elliott, and is Copyright &copy; 2000. Reproduction or re-publication by any means whatsoever, whether electronic, mechanical or electro- mechanical, is strictly prohibited under International Copyright laws. The author (Phil Allison) and editor (Rod Elliott) grant the reader the right to use this information for personal use only, and further allows that one (1) copy may be made for reference while constructing the project. Commercial use is prohibited without express written authorisation from Phil Allison and Rod Elliott.</td></tr>
</table>
<div class="t-sml">Page Created and Copyright &copy; Rod Elliott 25 Aug 2000</div>
</body>
</html>
